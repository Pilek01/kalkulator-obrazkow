<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate-key="page_title">Kalkulator Obrazk√≥w - SENTREX</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2a2a2a;
            --bg-tertiary: #3a3a3a;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --accent: #ff6b35;
            --accent-hover: #ff8555;
            --border: #404040;
            --success: #4caf50;
            --danger: #f44336;
        }

        body.light-mode {
            --bg-primary: #f5f5f5;
            --bg-secondary: #ffffff;
            --bg-tertiary: #e0e0e0;
            --text-primary: #1a1a1a;
            --text-secondary: #666666;
            --border: #cccccc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .content-wrapper {
            flex: 1;
        }

        .header {
            background: var(--bg-secondary);
            border-bottom: 3px solid var(--accent);
            padding: 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
        }
        
        .controls-wrapper {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .language-selector {
            display: flex;
            gap: 0.5rem;
            background: var(--bg-tertiary);
            padding: 0.4rem 0.8rem;
            border-radius: 5px;
            border: 2px solid var(--border);
        }

        .lang-flag {
            cursor: pointer;
            font-size: 1.2rem;
            filter: grayscale(1);
            opacity: 0.6;
            transition: all 0.2s;
        }

        .lang-flag:hover {
            filter: grayscale(0);
            opacity: 1;
            transform: scale(1.1);
        }
        
        .lang-flag.active {
            filter: grayscale(0);
            opacity: 1;
        }

        .theme-toggle {
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: var(--accent);
            border-color: var(--accent);
            transform: scale(1.05);
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .calculator-card {
            background: var(--bg-secondary);
            border-radius: 10px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            border: 2px solid var(--border);
        }

        .calculator-header {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--accent);
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .form-group input {
            width: 100%;
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 2px solid var(--border);
            border-radius: 5px;
            color: var(--text-primary);
            font-size: 1.2rem;
            transition: border-color 0.3s;
            text-align: center;
            font-weight: 600;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .result-box {
            background: linear-gradient(135deg, var(--accent) 0%, #ff8555 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            text-align: center;
            margin: 2rem 0;
            box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4);
        }

        .result-label {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 0.5rem;
        }

        .result-value {
            font-size: 4rem;
            font-weight: 900;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .result-unit {
            font-size: 1.5rem;
            opacity: 0.9;
            margin-top: 0.5rem;
        }

        .btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s;
            border: 2px solid var(--accent);
            width: 100%;
        }

        .btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255,107,53,0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--border);
        }

        .btn-secondary:hover {
            background: var(--border);
            border-color: var(--text-secondary);
        }

        .btn-danger {
            background: var(--danger);
            border-color: var(--danger);
        }

        .history-section {
            margin-top: 3rem;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .history-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
        }

        .history-item {
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent);
            transition: all 0.3s;
        }

        .history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(255,107,53,0.3);
        }

        .history-item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
        }

        .history-item-time {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .history-item-delete {
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.3rem 0.8rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .history-item-delete:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }

        .history-item-data {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 0.8rem;
        }

        .history-data-item {
            color: var(--text-secondary);
        }

        .history-data-item strong {
            color: var(--text-primary);
        }

        .history-result {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--accent);
            margin-top: 0.5rem;
        }

        .empty-history {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
            font-style: italic;
        }

        .info-box {
            background: var(--bg-tertiary);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--accent);
        }

        .info-box h3 {
            color: var(--accent);
            margin-bottom: 0.8rem;
        }

        .info-box p {
            color: var(--text-secondary);
            margin: 0.5rem 0;
        }

        footer {
            text-align: center;
            padding: 1.5rem;
            font-size: 0.8rem;
            color: var(--text-secondary);
            opacity: 0.6;
        }

        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: 1fr;
            }

            .result-value {
                font-size: 3rem;
            }

            .history-item-data {
                grid-template-columns: 1fr;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="content-wrapper">
        <div class="header">
            <div class="header-content">
                <div class="title" data-translate-key="app_title">üìä Kalkulator Obrazk√≥w - SENTREX v1.0.4</div>
                <div class="controls-wrapper">
                     <div class="language-selector">
                        <span onclick="setLanguage('pl')" class="lang-flag" data-lang="pl" title="Polski">üáµüá±</span>
                        <span onclick="setLanguage('ua')" class="lang-flag" data-lang="ua" title="–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞">üá∫üá¶</span>
                        <span onclick="setLanguage('ru')" class="lang-flag" data-lang="ru" title="–†—É—Å—Å–∫–∏–π">üá∑üá∫</span>
                    </div>
                    <button class="theme-toggle" onclick="toggleHelp()" data-translate-title-key="help_button_title" style="font-size: 1rem; padding: 0.5rem 1rem;">
                        <span data-translate-key="help_button">‚ùì Jak to dzia≈Ça?</span>
                    </button>
                    <button class="theme-toggle" onclick="toggleTheme()" data-translate-title-key="theme_toggle_title" title="Zmie≈Ñ motyw">üåì</button>
                </div>
            </div>
        </div>

        <!-- ROZSUWANE INFO -->
        <div id="helpBox" class="info-box" style="max-width: 1200px; margin: 1rem auto; padding: 0 1rem; display: none;">
            <div style="background: var(--bg-tertiary); padding: 1.5rem; border-radius: 8px; border-left: 4px solid var(--accent);">
                <h3 style="color: var(--accent); margin-bottom: 0.8rem;" data-translate-key="help_box_title">‚ÑπÔ∏è Jak to dzia≈Ça?</h3>
                <p style="color: var(--text-secondary); margin: 0.5rem 0;" data-translate-key="help_meters"><strong>Metry:</strong> D≈Çugo≈õƒá zadrukowanej rolki papieru (np. 6289m)</p>
                <p style="color: var(--text-secondary); margin: 0.5rem 0;" data-translate-key="help_sleeve"><strong>Wa≈Çek (Sleeve):</strong> ≈õrednica sleeve'a w centymetrach (np. 59cm)</p>
                <p style="color: var(--text-secondary); margin: 0.5rem 0;" data-translate-key="help_motifs"><strong>Ilo≈õƒá motyw√≥w:</strong> Ile obrazk√≥w mie≈õci siƒô na jednym sleeve (np. 2)</p>
                <p style="color: var(--text-secondary); margin: 0.5rem 0;" data-translate-key="help_formula"><strong>Wz√≥r:</strong> ((Metry / Wa≈Çek) √ó 100) √ó Ilo≈õƒá motyw√≥w = Liczba obrazk√≥w</p>
            </div>
        </div>

        <div class="container">
            <div class="calculator-card">
                <div class="calculator-header" data-translate-key="card_header">Oblicz liczbƒô obrazk√≥w</div>
                
                <form id="calculatorForm" onsubmit="calculate(event)">
                    <!-- KONFIGURACJA W JEDNEJ LINII - ustawia siƒô raz na zmianƒô -->
                    <div style="margin-bottom: 2rem; padding: 1rem; background: var(--bg-tertiary); border-radius: 8px; border: 2px solid var(--border);">
                        <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.8rem; font-weight: 600;" data-translate-key="config_header">
                            ‚öôÔ∏è KONFIGURACJA (ustaw raz na zmianƒô)
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="walek" style="font-size: 0.9rem;" data-translate-key="sleeve_label">üîß Wa≈Çek (cm)</label>
                                <input 
                                    type="number" 
                                    id="walek" 
                                    name="walek" 
                                    step="0.1" 
                                    required
                                    data-translate-placeholder-key="sleeve_placeholder"
                                    placeholder="59.0"
                                    style="font-size: 1rem; padding: 0.7rem;">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="motywy" style="font-size: 0.9rem;" data-translate-key="motifs_label">üé® Motywy</label>
                                <input 
                                    type="number" 
                                    id="motywy" 
                                    name="motywy" 
                                    step="1" 
                                    required
                                    data-translate-placeholder-key="motifs_placeholder"
                                    placeholder="2"
                                    min="1"
                                    style="font-size: 1rem; padding: 0.7rem;">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="rolki" style="font-size: 0.9rem;" data-translate-key="rolls_label">üî™ Rolek</label>
                                <input 
                                    type="number" 
                                    id="rolki" 
                                    name="rolki" 
                                    step="1" 
                                    min="1"
                                    value="1"
                                    data-translate-placeholder-key="rolls_placeholder"
                                    placeholder="1"
                                    style="font-size: 1rem; padding: 0.7rem;">
                            </div>
                        </div>
                    </div>

                    <!-- DU≈ªE POLE - METRY (najczƒô≈õciej u≈ºywane) -->
                    <div class="form-group">
                        <label for="metry" data-translate-key="meters_label">üìè Metry (m)</label>
                        <input 
                            type="number" 
                            id="metry" 
                            name="metry" 
                            step="0.01" 
                            required
                            data-translate-placeholder-key="meters_placeholder"
                            placeholder="6289"
                            autofocus
                            style="font-size: 2.5rem; padding: 1.5rem; background: linear-gradient(135deg, rgba(0, 191, 255, 0.15), rgba(0, 191, 255, 0.05)); border: 3px solid rgba(0, 191, 255, 0.3); font-weight: 700;">
                    </div>

                    <div class="form-group" style="margin-top: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.8rem; cursor: pointer; user-select: none;">
                            <input 
                                type="checkbox" 
                                id="zaokraglaj" 
                                name="zaokraglaj"
                                style="width: 24px; height: 24px; cursor: pointer; accent-color: var(--accent);">
                            <span style="font-size: 1rem;" data-translate-key="rounding_label">üìà ZaokrƒÖglaj w g√≥rƒô (min. +100, max. +200)</span>
                        </label>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-top: 0.5rem; margin-left: 2rem;" data-translate-key="rounding_desc">
                            ZaokrƒÖgla do pe≈Çnej setki dodajƒÖc minimum 100, maksimum 200 obrazk√≥w
                        </p>
                    </div>

                    <div id="resultBox" class="result-box" style="display: none; background: linear-gradient(135deg, #4caf50 0%, #66bb6a 100%);">
                        <div class="result-label" data-translate-key="result_label_single">Wynik - 1 rolka</div>
                        <div class="result-value" id="resultValue">0</div>
                        <div class="result-unit" data-translate-key="result_unit">Obrazk√≥w</div>
                        <div id="resultDetails" style="font-size: 1rem; opacity: 0.9; margin-top: 0.8rem;"></div>
                        
                        <!-- MA≈ÅA INFO O ROLKACH -->
                        <div id="resultTotal" style="margin-top: 1rem; font-size: 0.95rem; opacity: 0.85; display: none;">
                            <span id="resultTotalText"></span>
                        </div>
                        
                        <!-- PRZYCISK KOPIUJ -->
                        <button type="button" class="btn" onclick="copyResult(event)" style="margin-top: 1.5rem; background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.4);">
                            <span data-translate-key="copy_button">üìã Skopiuj wynik (format systemu)</span>
                        </button>
                    </div>

                    <button type="submit" class="btn"><span data-translate-key="calculate_button">üî¢ Oblicz</span></button>
                </form>
            </div>

            <div class="history-section">
                <!-- STATYSTYKI -->
                <div class="calculator-card" style="margin-bottom: 2rem; padding: 1.5rem;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.3rem;" data-translate-key="stats_today">üìä Dzisiaj oblicze≈Ñ</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--accent);" id="statToday">0</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.3rem;" data-translate-key="stats_total_images">üéØ ≈ÅƒÖcznie obrazk√≥w</div>
                            <div style="font-size: 2rem; font-weight: 700; color: var(--success);" id="statTotal">0</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 0.3rem;" data-translate-key="stats_avg_roll">üìè ≈örednia rolka</div>
                            <div style="font-size: 2rem; font-weight: 700; color: #00bfff;" id="statAvg">0 m</div>
                        </div>
                    </div>
                </div>

                <div class="history-header">
                    <div class="history-title" data-translate-key="history_title">üìú Historia oblicze≈Ñ</div>
                    <button class="btn btn-danger" onclick="clearHistory()" style="width: auto; padding: 0.6rem 1.2rem;">
                        <span data-translate-key="clear_history_button">üóëÔ∏è Wyczy≈õƒá historiƒô</span>
                    </button>
                </div>

                <div id="historyContainer">
                    <div class="empty-history" data-translate-key="empty_history">
                        Brak historii oblicze≈Ñ. Wykonaj pierwsze obliczenie!
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer>
        Made by Kamil Matysek
    </footer>

    <script>
        // =================================================================
        // T≈ÅUMACZENIA
        // =================================================================
        const translations = {
            pl: {
                page_title: "Kalkulator Obrazk√≥w - SENTREX",
                app_title: "üìä Kalkulator Obrazk√≥w - SENTREX v1.0.4",
                help_button: "‚ùì Jak to dzia≈Ça?",
                help_button_title: "Poka≈º pomoc",
                theme_toggle_title: "Zmie≈Ñ motyw",
                help_box_title: "‚ÑπÔ∏è Jak to dzia≈Ça?",
                help_meters: "<strong>Metry:</strong> D≈Çugo≈õƒá zadrukowanej rolki papieru (np. 6289m)",
                help_sleeve: "<strong>Wa≈Çek (Sleeve):</strong> ≈õrednica sleeve'a w centymetrach (np. 59cm)",
                help_motifs: "<strong>Ilo≈õƒá motyw√≥w:</strong> Ile obrazk√≥w mie≈õci siƒô na jednym sleeve (np. 2)",
                help_formula: "<strong>Wz√≥r:</strong> ((Metry / Wa≈Çek) √ó 100) √ó Ilo≈õƒá motyw√≥w = Liczba obrazk√≥w",
                card_header: "Oblicz liczbƒô obrazk√≥w",
                config_header: "‚öôÔ∏è KONFIGURACJA (ustaw raz na zmianƒô)",
                sleeve_label: "üîß Wa≈Çek (cm)",
                sleeve_placeholder: "59.0",
                motifs_label: "üé® Motywy",
                motifs_placeholder: "2",
                rolls_label: "üî™ Rolek",
                rolls_placeholder: "1",
                meters_label: "üìè Metry (m)",
                meters_placeholder: "6289",
                rounding_label: "üìà ZaokrƒÖglaj w g√≥rƒô (min. +100, max. +200)",
                rounding_desc: "ZaokrƒÖgla do pe≈Çnej setki dodajƒÖc minimum 100, maksimum 200 obrazk√≥w",
                result_label_single: "Wynik - 1 rolka",
                result_unit: "Obrazk√≥w",
                copy_button: "üìã Skopiuj wynik (format systemu)",
                calculate_button: "üî¢ Oblicz",
                stats_today: "üìä Dzisiaj oblicze≈Ñ",
                stats_total_images: "üéØ ≈ÅƒÖcznie obrazk√≥w",
                stats_avg_roll: "üìè ≈örednia rolka",
                history_title: "üìú Historia oblicze≈Ñ",
                clear_history_button: "üóëÔ∏è Wyczy≈õƒá historiƒô",
                empty_history: "Brak historii oblicze≈Ñ. Wykonaj pierwsze obliczenie!",
                history_delete_button: "üóëÔ∏è Usu≈Ñ",
                history_meters: "<strong>Metry:</strong>",
                history_sleeve: "<strong>Wa≈Çek:</strong>",
                history_motifs: "<strong>Motywy:</strong>",
                history_rolls: "<strong>Rolek:</strong>",
                history_result_label: "‚û°Ô∏è Wynik:",
                history_images_unit_single: "obrazk√≥w (1 rolka)",
                history_rounded_from: "üìà ZaokrƒÖglono z",
                history_total_label: "üî™ ≈ÅƒÖcznie:",
                history_total_images_unit: "obrazk√≥w",
                history_total_from_rolls: "rolek",
                confirm_delete_item: "Czy na pewno chcesz usunƒÖƒá to obliczenie z historii?",
                alert_history_empty: "Historia jest ju≈º pusta!",
                confirm_clear_history: "Czy na pewno chcesz usunƒÖƒá ca≈ÇƒÖ historiƒô ({count} oblicze≈Ñ)?",
                copied_text: "‚úÖ Skopiowano:",
                detailed_result_text: "üìä Dok≈Çadny wynik: {exact} (+{diff} obrazk√≥w)",
                total_result_text: "üî™ ≈ÅƒÖcznie {rolls} rolek: {total} obrazk√≥w ({single} √ó {rolls})",
                error_invalid_sleeve: "Warto≈õƒá wa≈Çka musi byƒá wiƒôksza od zera!"
            },
            ua: {
                page_title: "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ó–æ–±—Ä–∞–∂–µ–Ω—å - SENTREX",
                app_title: "üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ó–æ–±—Ä–∞–∂–µ–Ω—å - SENTREX v1.0.4",
                help_button: "‚ùì –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?",
                help_button_title: "–ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ–ø–æ–º–æ–≥—É",
                theme_toggle_title: "–ó–º—ñ–Ω–∏—Ç–∏ —Ç–µ–º—É",
                help_box_title: "‚ÑπÔ∏è –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?",
                help_meters: "<strong>–ú–µ—Ç—Ä–∏:</strong> –î–æ–≤–∂–∏–Ω–∞ –¥—Ä—É–∫–æ–≤–∞–Ω–æ–≥–æ —Ä—É–ª–æ–Ω—É –ø–∞–ø–µ—Ä—É (–Ω–∞–ø—Ä. 6289–º)",
                help_sleeve: "<strong>–í–∞–ª–µ–∫ (Sleeve):</strong> –¥—ñ–∞–º–µ—Ç—Ä –≥—ñ–ª—å–∑–∏ –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö (–Ω–∞–ø—Ä. 59—Å–º)",
                help_motifs: "<strong>–ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ—Ç–∏–≤—ñ–≤:</strong> –°–∫—ñ–ª—å–∫–∏ –∑–æ–±—Ä–∞–∂–µ–Ω—å –≤–º—ñ—â—É—î—Ç—å—Å—è –Ω–∞ –æ–¥–Ω—ñ–π –≥—ñ–ª—å–∑—ñ (–Ω–∞–ø—Ä. 2)",
                help_formula: "<strong>–§–æ—Ä–º—É–ª–∞:</strong> ((–ú–µ—Ç—Ä–∏ / –í–∞–ª–µ–∫) √ó 100) √ó –ö—ñ–ª—å–∫—ñ—Å—Ç—å –º–æ—Ç–∏–≤—ñ–≤ = –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω—å",
                card_header: "–û–±—á–∏—Å–ª–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω—å",
                config_header: "‚öôÔ∏è –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Ø (–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Ä–∞–∑ –Ω–∞ –∑–º—ñ–Ω—É)",
                sleeve_label: "üîß –í–∞–ª–µ–∫ (—Å–º)",
                sleeve_placeholder: "59.0",
                motifs_label: "üé® –ú–æ—Ç–∏–≤–∏",
                motifs_placeholder: "2",
                rolls_label: "üî™ –†—É–ª–æ–Ω—ñ–≤",
                rolls_placeholder: "1",
                meters_label: "üìè –ú–µ—Ç—Ä–∏ (–º)",
                meters_placeholder: "6289",
                rounding_label: "üìà –û–∫—Ä—É–≥–ª—é–≤–∞—Ç–∏ –≤–≥–æ—Ä—É (–º—ñ–Ω. +100, –º–∞–∫—Å. +200)",
                rounding_desc: "–û–∫—Ä—É–≥–ª—é—î –¥–æ –ø–æ–≤–Ω–æ—ó —Å–æ—Ç–Ω—ñ, –¥–æ–¥–∞—é—á–∏ –º—ñ–Ω—ñ–º—É–º 100, –º–∞–∫—Å–∏–º—É–º 200 –∑–æ–±—Ä–∞–∂–µ–Ω—å",
                result_label_single: "–†–µ–∑—É–ª—å—Ç–∞—Ç - 1 —Ä—É–ª–æ–Ω",
                result_unit: "–ó–æ–±—Ä–∞–∂–µ–Ω—å",
                copy_button: "üìã –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Ñ–æ—Ä–º–∞—Ç —Å–∏—Å—Ç–µ–º–∏)",
                calculate_button: "üî¢ –û–±—á–∏—Å–ª–∏—Ç–∏",
                stats_today: "üìä –°—å–æ–≥–æ–¥–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω—å",
                stats_total_images: "üéØ –í—Å—å–æ–≥–æ –∑–æ–±—Ä–∞–∂–µ–Ω—å",
                stats_avg_roll: "üìè –°–µ—Ä–µ–¥–Ω—ñ–π —Ä—É–ª–æ–Ω",
                history_title: "üìú –Ü—Å—Ç–æ—Ä—ñ—è –æ–±—á–∏—Å–ª–µ–Ω—å",
                clear_history_button: "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é",
                empty_history: "–Ü—Å—Ç–æ—Ä—ñ—è –æ–±—á–∏—Å–ª–µ–Ω—å –ø–æ—Ä–æ–∂–Ω—è. –ó—Ä–æ–±—ñ—Ç—å –ø–µ—Ä—à–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è!",
                history_delete_button: "üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏",
                history_meters: "<strong>–ú–µ—Ç—Ä–∏:</strong>",
                history_sleeve: "<strong>–í–∞–ª–µ–∫:</strong>",
                history_motifs: "<strong>–ú–æ—Ç–∏–≤–∏:</strong>",
                history_rolls: "<strong>–†—É–ª–æ–Ω—ñ–≤:</strong>",
                history_result_label: "‚û°Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç:",
                history_images_unit_single: "–∑–æ–±—Ä–∞–∂–µ–Ω—å (1 —Ä—É–ª–æ–Ω)",
                history_rounded_from: "üìà –û–∫—Ä—É–≥–ª–µ–Ω–æ –∑",
                history_total_label: "üî™ –í—Å—å–æ–≥–æ:",
                history_total_images_unit: "–∑–æ–±—Ä–∞–∂–µ–Ω—å",
                history_total_from_rolls: "—Ä—É–ª–æ–Ω—ñ–≤",
                confirm_delete_item: "–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ —ñ—Å—Ç–æ—Ä—ñ—ó?",
                alert_history_empty: "–Ü—Å—Ç–æ—Ä—ñ—è –≤–∂–µ –ø–æ—Ä–æ–∂–Ω—è!",
                confirm_clear_history: "–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—é —ñ—Å—Ç–æ—Ä—ñ—é ({count} –æ–±—á–∏—Å–ª–µ–Ω—å)?",
                copied_text: "‚úÖ –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ:",
                detailed_result_text: "üìä –¢–æ—á–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {exact} (+{diff} –∑–æ–±—Ä–∞–∂–µ–Ω—å)",
                total_result_text: "üî™ –í—Å—å–æ–≥–æ {rolls} —Ä—É–ª–æ–Ω—ñ–≤: {total} –∑–æ–±—Ä–∞–∂–µ–Ω—å ({single} √ó {rolls})",
                error_invalid_sleeve: "–ó–Ω–∞—á–µ–Ω–Ω—è –≤–∞–ª—É –º–∞—î –±—É—Ç–∏ –±—ñ–ª—å—à–µ –Ω—É–ª—è!"
            },
            ru: {
                page_title: "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - SENTREX",
                app_title: "üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π - SENTREX v1.0.4",
                help_button: "‚ùì –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?",
                help_button_title: "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å",
                theme_toggle_title: "–°–º–µ–Ω–∏—Ç—å —Ç–µ–º—É",
                help_box_title: "‚ÑπÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?",
                help_meters: "<strong>–ú–µ—Ç—Ä—ã:</strong> –î–ª–∏–Ω–∞ –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Ä—É–ª–æ–Ω–∞ –±—É–º–∞–≥–∏ (–Ω–∞–ø—Ä. 6289–º)",
                help_sleeve: "<strong>–í–∞–ª (Sleeve):</strong> –¥–∏–∞–º–µ—Ç—Ä –≥–∏–ª—å–∑—ã –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö (–Ω–∞–ø—Ä. 59—Å–º)",
                help_motifs: "<strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ—Ç–∏–≤–æ–≤:</strong> –°–∫–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ –æ–¥–Ω–æ–π –≥–∏–ª—å–∑–µ (–Ω–∞–ø—Ä. 2)",
                help_formula: "<strong>–§–æ—Ä–º—É–ª–∞:</strong> ((–ú–µ—Ç—Ä—ã / –í–∞–ª) √ó 100) √ó –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ—Ç–∏–≤–æ–≤ = –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                card_header: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                config_header: "‚öôÔ∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–∑ –Ω–∞ —Å–º–µ–Ω—É)",
                sleeve_label: "üîß –í–∞–ª (—Å–º)",
                sleeve_placeholder: "59.0",
                motifs_label: "üé® –ú–æ—Ç–∏–≤—ã",
                motifs_placeholder: "2",
                rolls_label: "üî™ –†—É–ª–æ–Ω–æ–≤",
                rolls_placeholder: "1",
                meters_label: "üìè –ú–µ—Ç—Ä—ã (–º)",
                meters_placeholder: "6289",
                rounding_label: "üìà –û–∫—Ä—É–≥–ª—è—Ç—å –≤–≤–µ—Ä—Ö (–º–∏–Ω. +100, –º–∞–∫—Å. +200)",
                rounding_desc: "–û–∫—Ä—É–≥–ª—è–µ—Ç –¥–æ –ø–æ–ª–Ω–æ–π —Å–æ—Ç–Ω–∏, –¥–æ–±–∞–≤–ª—è—è –º–∏–Ω–∏–º—É–º 100, –º–∞–∫—Å–∏–º—É–º 200 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                result_label_single: "–†–µ–∑—É–ª—å—Ç–∞—Ç - 1 —Ä—É–ª–æ–Ω",
                result_unit: "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                copy_button: "üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Ñ–æ—Ä–º–∞—Ç —Å–∏—Å—Ç–µ–º—ã)",
                calculate_button: "üî¢ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å",
                stats_today: "üìä –°–µ–≥–æ–¥–Ω—è —Ä–∞—Å—á—ë—Ç–æ–≤",
                stats_total_images: "üéØ –í—Å–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                stats_avg_roll: "üìè –°—Ä–µ–¥–Ω–∏–π —Ä—É–ª–æ–Ω",
                history_title: "üìú –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤",
                clear_history_button: "üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é",
                empty_history: "–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ –ø—É—Å—Ç–∞. –°–¥–µ–ª–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π —Ä–∞—Å—á—ë—Ç!",
                history_delete_button: "üóëÔ∏è –£–¥–∞–ª–∏—Ç—å",
                history_meters: "<strong>–ú–µ—Ç—Ä—ã:</strong>",
                history_sleeve: "<strong>–í–∞–ª:</strong>",
                history_motifs: "<strong>–ú–æ—Ç–∏–≤—ã:</strong>",
                history_rolls: "<strong>–†—É–ª–æ–Ω–æ–≤:</strong>",
                history_result_label: "‚û°Ô∏è –†–µ–∑—É–ª—å—Ç–∞—Ç:",
                history_images_unit_single: "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (1 —Ä—É–ª–æ–Ω)",
                history_rounded_from: "üìà –û–∫—Ä—É–≥–ª–µ–Ω–æ —Å",
                history_total_label: "üî™ –í—Å–µ–≥–æ:",
                history_total_images_unit: "–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π",
                history_total_from_rolls: "—Ä—É–ª–æ–Ω–æ–≤",
                confirm_delete_item: "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ä–∞—Å—á—ë—Ç –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏?",
                alert_history_empty: "–ò—Å—Ç–æ—Ä–∏—è —É–∂–µ –ø—É—Å—Ç–∞!",
                confirm_clear_history: "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é ({count} —Ä–∞—Å—á—ë—Ç–æ–≤)?",
                copied_text: "‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ:",
                detailed_result_text: "üìä –¢–æ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: {exact} (+{diff} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)",
                total_result_text: "üî™ –í—Å–µ–≥–æ {rolls} —Ä—É–ª–æ–Ω–æ–≤: {total} –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π ({single} √ó {rolls})",
                error_invalid_sleeve: "–ó–Ω–∞—á–µ–Ω–∏–µ –≤–∞–ª–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ –Ω—É–ª—è!"
            }
        };
        
        let currentLang = 'pl';
        
        function setLanguage(lang) {
            if (!translations[lang]) return;
            currentLang = lang;
            localStorage.setItem('language', lang);
            
            document.querySelectorAll('[data-translate-key]').forEach(el => {
                const key = el.dataset.translateKey;
                if (translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });

            document.querySelectorAll('[data-translate-title-key]').forEach(el => {
                const key = el.dataset.translateTitleKey;
                if (translations[lang][key]) {
                    el.title = translations[lang][key];
                }
            });
            
            document.querySelectorAll('[data-translate-placeholder-key]').forEach(el => {
                const key = el.dataset.translatePlaceholderKey;
                if (translations[lang][key]) {
                    el.placeholder = translations[lang][key];
                }
            });
            
            document.querySelectorAll('.lang-flag').forEach(flag => {
                flag.classList.toggle('active', flag.dataset.lang === lang);
            });
            
            renderHistory();
        }

        function loadLanguage() {
            const savedLang = localStorage.getItem('language');
            if (savedLang && translations[savedLang]) {
                setLanguage(savedLang);
            } else {
                setLanguage('pl');
            }
        }

        // =================================================================
        // LOGIKA APLIKACJI
        // =================================================================
        let history = [];
        let lastResult = 0;

        function loadHistory() {
            const saved = localStorage.getItem('obrazki_history');
            if (saved) {
                try {
                    history = JSON.parse(saved);
                    renderHistory();
                } catch (e) {
                    console.error('B≈ÇƒÖd wczytywania historii:', e);
                    history = [];
                }
            }
        }

        function saveHistory() {
            localStorage.setItem('obrazki_history', JSON.stringify(history));
        }

        function calculate(event) {
            event.preventDefault();

            const metry = parseFloat(document.getElementById('metry').value);
            const walek = parseFloat(document.getElementById('walek').value);
            const motywy = parseInt(document.getElementById('motywy').value);
            const zaokraglaj = document.getElementById('zaokraglaj').checked;
            const rolki = parseInt(document.getElementById('rolki').value) || 1;

            if (walek <= 0) {
                alert(translations[currentLang].error_invalid_sleeve);
                return;
            }

            const wynikDok≈Çadny = Math.floor(((metry / walek) * 100) * motywy);
            let wynikKo≈Ñcowy = wynikDok≈Çadny;
            let zaokraglono = false;

            if (zaokraglaj) {
                const doDodania = 100 + (100 - (wynikDok≈Çadny % 100)) % 100;
                wynikKo≈Ñcowy = wynikDok≈Çadny + doDodania;
                zaokraglono = true;
            }

            lastResult = wynikKo≈Ñcowy;
            const wynikLacznie = wynikKo≈Ñcowy * rolki;

            const resultBox = document.getElementById('resultBox');
            const resultValue = document.getElementById('resultValue');
            const resultDetails = document.getElementById('resultDetails');
            const resultTotal = document.getElementById('resultTotal');
            
            resultBox.style.display = 'block';
            resultValue.textContent = wynikKo≈Ñcowy.toLocaleString('pl-PL');
            
            if (zaokraglono) {
                const roznica = wynikKo≈Ñcowy - wynikDok≈Çadny;
                resultDetails.innerHTML = translations[currentLang].detailed_result_text
                    .replace('{exact}', wynikDok≈Çadny.toLocaleString('pl-PL'))
                    .replace('{diff}', roznica);
            } else {
                resultDetails.innerHTML = '';
            }

            if (rolki > 1) {
                resultTotal.style.display = 'block';
                document.getElementById('resultTotalText').textContent = translations[currentLang].total_result_text
                    .replace(/{rolls}/g, rolki)
                    .replace('{total}', wynikLacznie.toLocaleString('pl-PL'))
                    .replace('{single}', wynikKo≈Ñcowy.toLocaleString('pl-PL'));
            } else {
                resultTotal.style.display = 'none';
            }
            
            resultValue.style.transform = 'scale(0)';
            setTimeout(() => {
                resultValue.style.transition = 'transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)';
                resultValue.style.transform = 'scale(1)';
            }, 10);

            const historyItem = {
                id: Date.now(),
                metry, walek, motywy, rolki, wynikDok≈Çadny, wynikKo≈Ñcowy, wynikLacznie, zaokraglono,
                timestamp: new Date().toLocaleString('pl-PL', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit' })
            };

            history.unshift(historyItem);
            if (history.length > 50) history = history.slice(0, 50);

            saveHistory();
            renderHistory();
            updateStats();
        }

        function copyResult(event) {
            const formatted = (lastResult / 1000).toFixed(1);
            navigator.clipboard.writeText(formatted).then(() => {
                const btn = event.target.closest('.btn');
                const originalText = btn.innerHTML;
                btn.innerHTML = `${translations[currentLang].copied_text} ${formatted}`;
                btn.style.background = 'rgba(76, 175, 80, 0.3)';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = 'rgba(255,255,255,0.2)';
                }, 2000);
            }).catch(err => console.error('B≈ÇƒÖd kopiowania:', err));
        }

        function renderHistory() {
            const container = document.getElementById('historyContainer');
            const langDict = translations[currentLang];

            if (history.length === 0) {
                container.innerHTML = `<div class="empty-history">${langDict.empty_history}</div>`;
                return;
            }

            container.innerHTML = history.map(item => {
                const wynikDoWyswietlenia = item.wynikKo≈Ñcowy || item.wynik;
                let wynikHTML = '';

                if (item.zaokraglono) {
                    const roznica = item.wynikKo≈Ñcowy - item.wynikDok≈Çadny;
                    wynikHTML = `
                        <div class="history-result">
                            ${langDict.history_result_label} ${wynikDoWyswietlenia.toLocaleString('pl-PL')} ${langDict.history_images_unit_single}
                            <span style="font-size: 0.9rem; opacity: 0.7; display: block; margin-top: 0.3rem;">
                               ${langDict.history_rounded_from} ${item.wynikDok≈Çadny.toLocaleString('pl-PL')} (+${roznica})
                            </span>
                        </div>`;
                } else {
                    wynikHTML = `<div class="history-result">${langDict.history_result_label} ${wynikDoWyswietlenia.toLocaleString('pl-PL')} ${langDict.history_images_unit_single}</div>`;
                }

                if (item.rolki > 1) {
                    wynikHTML += `
                        <div style="margin-top: 0.8rem; padding: 0.8rem; background: rgba(76, 175, 80, 0.1); border-radius: 5px; border-left: 3px solid #4caf50;">
                            <strong style="color: #4caf50;">${langDict.history_total_label} ${item.wynikLacznie.toLocaleString('pl-PL')} ${langDict.history_total_images_unit}</strong>
                            <span style="font-size: 0.9rem; color: var(--text-secondary); display: block; margin-top: 0.2rem;">
                                (${wynikDoWyswietlenia.toLocaleString('pl-PL')} √ó ${item.rolki} ${langDict.history_total_from_rolls})
                            </span>
                        </div>`;
                }
                
                return `
                    <div class="history-item">
                        <div class="history-item-header">
                            <div class="history-item-time">üìÖ ${item.timestamp}</div>
                            <button class="history-item-delete" onclick="deleteHistoryItem(${item.id})">${langDict.history_delete_button}</button>
                        </div>
                        <div class="history-item-data">
                            <div class="history-data-item">${langDict.history_meters} ${item.metry.toLocaleString('pl-PL')} m</div>
                            <div class="history-data-item">${langDict.history_sleeve} ${item.walek} cm</div>
                            <div class="history-data-item">${langDict.history_motifs} ${item.motywy}</div>
                            ${item.rolki > 1 ? `<div class="history-data-item">${langDict.history_rolls} ${item.rolki}</div>` : ''}
                        </div>
                        ${wynikHTML}
                    </div>`;
            }).join('');
        }

        function updateStats() {
            const today = new Date().toLocaleDateString('pl-PL');
            const todayCalculations = history.filter(item => new Date(item.timestamp.split(',')[0].split('.').reverse().join('-')).toLocaleDateString('pl-PL') === today);
            
            const statToday = todayCalculations.length;
            const statTotal = history.reduce((sum, item) => sum + (item.wynikLacznie || item.wynikKo≈Ñcowy || item.wynik || 0), 0);
            const statAvg = history.length > 0 ? Math.round(history.reduce((sum, item) => sum + item.metry, 0) / history.length) : 0;

            document.getElementById('statToday').textContent = statToday;
            document.getElementById('statTotal').textContent = statTotal.toLocaleString('pl-PL');
            document.getElementById('statAvg').textContent = statAvg.toLocaleString('pl-PL') + ' m';
        }

        function deleteHistoryItem(id) {
            if (confirm(translations[currentLang].confirm_delete_item)) {
                history = history.filter(item => item.id !== id);
                saveHistory();
                renderHistory();
                updateStats();
            }
        }

        function clearHistory() {
            if (history.length === 0) {
                alert(translations[currentLang].alert_history_empty);
                return;
            }

            const confirmMsg = translations[currentLang].confirm_clear_history.replace('{count}', history.length);
            if (confirm(confirmMsg)) {
                history = [];
                saveHistory();
                renderHistory();
                updateStats();
                document.getElementById('resultBox').style.display = 'none';
                document.getElementById('calculatorForm').reset();
                document.getElementById('rolki').value = 1;
            }
        }

        function toggleHelp() {
            const helpBox = document.getElementById('helpBox');
            helpBox.style.display = (helpBox.style.display === 'none' || helpBox.style.display === '') ? 'block' : 'none';
        }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLight = document.body.classList.contains('light-mode');
            localStorage.setItem('theme', isLight ? 'light' : 'dark');
        }

        function loadTheme() {
            if (localStorage.getItem('theme') === 'light') {
                document.body.classList.add('light-mode');
            }
        }

        // Inicjalizacja
        loadTheme();
        loadHistory();
        loadLanguage();
        updateStats();
    </script>
</body>
</html>
